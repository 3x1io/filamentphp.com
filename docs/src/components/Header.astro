---
import MobileNavigation from '@components/MobileNavigation.astro'
import VersionSelector from '@components/VersionSelector.astro'
import ThemeSelector from '@components/ThemeSelector.astro'
import { Icon } from 'astro-icon'
import Logo from './Logo.astro'
import HalloweenLogo from './HalloweenLogo.astro'
import ChristmasLogo from './ChristmasLogo.astro'

let { navigation = null } = Astro.props
---

<header
  x-data="{ isScrolled: false }"
  x-on:scroll.window="isScrolled = window.scrollY > 0"
  x-init="isScrolled = window.scrollY > 0"
  class="sticky top-0 z-50 border-b border-b-fair-pink dark:border-b-slate-800 transition duration-500 bg-cream dark:bg-[#171527]"
>
  <div class="bg-butter hidden md:block">
    <div
      x-data="{
        partner: null,
      }"
      x-init="partner = (Math.random() < 0.5) ? 'kirschbaum' : 'whizzy'"
      class="max-w-8xl mx-auto px-4 py-1.5 sm:px-6 lg:px-8 text-sm text-center text-white min-h-9"
    >
      <span x-cloak x-show="partner === 'kirschbaum'">
        Work with <a href="https://kirschbaumdevelopment.com?ref=filamentphp.com" target="_blank" class="underline">Kirschbaum</a>, the Filament development agency.
      </span>
      <span x-cloak x-show="partner === 'whizzy'">
        Build with <a href="https://whizzy.dev/?utm_source=filament&amp;utm_medium=referral&amp;utm_campaign=partner&amp;utm_content=header" target="_blank" class="underline">Whizzy</a>, the Filament development platform.
      </span>
    </div>
  </div>
  <div
    class="w-full max-w-8xl mx-auto flex flex-wrap gap-5 items-center justify-between sm:flex-nowrap px-4 py-3 sm:px-6 lg:px-8"
  >
    <div class="relative flex flex-grow basis-0 items-center gap-3">
      <div class="flex lg:hidden">
        <MobileNavigation navigation={navigation} />
      </div>
      <div
        x-data="{
          get isHalloween() {
            // Get the current date
            const today = new Date()
            const month = today.getMonth() + 1 // Months are 0-indexed, so we add 1
            const day = today.getDate()
            return (month === 10 && day >= 25) || (month === 11 && day === 1)
          },

          get isChristmas() {
            // Get the current date
            const today = new Date()
            const month = today.getMonth() + 1 // Months are 0-indexed, so we add 1
            const day = today.getDate()
            return (month === 12 && day >= 1)
          },
        }"
        class="flex gap-3 items-center"
      >
        <a
          href="/"
          aria-label="Homepage"
          class="text-gray-900 group/filament relative dark:text-primary-500 transition duration-500 ease-out hidden min-[510px]:block motion-reduce:transition-none"
        >
          <div
            x-cloak
            x-show="isHalloween === true"
          >
            <HalloweenLogo
              className="hover:text-stone-800 transition motion-reduce:transition-none text-stone-900 dark:hover:text-butter dark:text-[#ffa434]"
            />
          </div>
          <div
            x-cloak
            x-show="isChristmas === true"
          >
            <ChristmasLogo
              className="hover:text-stone-800 transition motion-reduce:transition-none text-stone-900 dark:hover:text-butter dark:text-[#ffa434]"
            />
          </div>
          <div
            x-cloak
            x-show="isHalloween === false && isChristmas === false"
          >
            <Logo
              className="hover:text-stone-800 transition motion-reduce:transition-none text-stone-900 dark:hover:text-butter dark:text-[#ffa434]"
            />
          </div>
        </a>
        <a
          href="/docs/"
          aria-label="Docs homepage"
          class="transition duration-500 ease-out motion-reduce:transition-none hover:translate-x-1"
          x-bind:class="{
            'ml-6': isHalloween || isChristmas,
          }"
        >
          <div
            class="font-black text-butter dark:text-white text-xl min-[510px]:pt-1"
          >
            DOCS
          </div>
        </a>
      </div>
    </div>
    <div class="relative flex flex-1 justify-end gap-3.5 items-center">
      <VersionSelector class="relative z-10" />
      <ThemeSelector class="relative z-10" />
      <div id="docsearch"></div>
      <a
        href="https://github.com/filamentphp/filament"
        class="group/github-link block"
        aria-label="GitHub"
        target="_blank"
        rel="noopener noreferrer"
      >
        <Icon
          name="github"
          class="h-7 w-7 transition duration-200 fill-stone-800 group-hover/github-link:fill-black dark:fill-gray-300 dark:group-hover/github-link:fill-white"
        />
      </a>
    </div>
  </div>
</header>
